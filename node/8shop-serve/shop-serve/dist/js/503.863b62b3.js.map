{"version":3,"file":"js/503.863b62b3.js","mappings":"oJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,QAAQ,OAASL,EAAIM,KAAKC,iBAAiB,GAAGL,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,OAAO,CAACE,YAAY,SAAS,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIM,KAAKI,UAAUR,EAAG,IAAI,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACF,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIM,KAAKK,OAAO,KAAKT,EAAG,OAAO,CAACF,EAAIQ,GAAG,SAASN,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIc,WAAWd,EAAIM,KAAKS,GAAI,IAAG,CAACf,EAAIQ,GAAG,YAAY,KAAKN,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,KAAK,CAACF,EAAIQ,GAAG,UAAUR,EAAIgB,GAAIhB,EAAIiB,UAAU,SAASC,EAAKC,GAAO,MAAO,CAAEA,EAAM,EAAGjB,EAAG,OAAO,CAACkB,IAAID,EAAMd,MAAM,CAAC,KAAOa,EAAK,UAAY,SAASN,GAAG,CAAC,YAAcZ,EAAIqB,eAAerB,EAAIsB,KAAM,KAAG,IACvzB,EACGC,EAAkB,G,UC6BtB,GACAC,KAAAA,SACAC,OACA,OACAnB,KAAAA,CAAAA,EACAW,SAAAA,GAGA,EACAS,UACA,sCACA,EACAC,QAAAA,CACAC,YACA,6BACAA,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACA,iBAEA,EACAC,iBACA,iCACAC,QAAAA,IAAAA,IACAC,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACA,kBAEA,EACAV,YAAAA,GACA,8DACA,EACAP,WAAAA,GACA,UAAAkB,EAAAA,SAAAC,GAAA,uBACA,6BACA,MACA,OACAC,SACAF,QACAC,aAEAnB,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACAgB,QAAAA,IAAAA,GACA,WACA,eACAK,QAAAA,UACAC,KAAAA,YAGA,WACA,eACAD,QAAAA,OACAC,KAAAA,UAEA,GAMA,IAEA,EAEAC,WAAAA,GACA,4BACA,SACA,IACA,mCACAC,kBAAAA,KACAC,iBAAAA,KACAH,KAAAA,YAEAI,MAAA,KAKA,+BAEAC,OAAA,KACA,eACAL,KAAAA,OACAD,QAAAA,SAFA,IAKAO,GAAAA,GACA,GAEA,GAEAC,MAAAA,CAEAC,OAAAA,CACAC,MAAAA,EACAC,QAAAA,EAAAA,GACA,iBACA,qBACA,KC9H8P,I,UCQ1PC,GAAY,OACd,EACAhD,EACAwB,GACA,EACA,KACA,WACA,MAIF,EAAewB,EAAiB,O,sHCjBzB,SAASnB,EAAUM,GACtB,OAAOc,EAAAA,EAAAA,GAAQ,CACXC,IAAK,cACLC,OAAO,MACPC,OAAQ,CACJjB,WAGX,CAEM,SAASH,EAAYqB,GACxB,OAAOJ,EAAAA,EAAAA,GAAQ,CACXC,IAAK,gBACLC,OAAQ,MACRC,OAAQ,CACJC,aAGX,CAEM,SAAStC,EAAWW,GAEvB,OAAOuB,EAAAA,EAAAA,GAAQ,CACXC,IAAI,WACJC,OAAO,MACPC,OAAO,IACA1B,IAGd,C","sources":["webpack://shop/./src/pages/detail/index.vue","webpack://shop/src/pages/detail/index.vue","webpack://shop/./src/pages/detail/index.vue?2d0b","webpack://shop/./src/pages/detail/index.vue?69dd","webpack://shop/./src/api/detail.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"magnifier\"},[_c('Magnifier',{attrs:{\"width\":\"500px\",\"imgsrc\":_vm.shop.img_list_url}})],1),_c('div',{staticClass:\"dec\"},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.shop.title))]),_c('p',{staticClass:\"price\"},[_c('span',[_vm._v(\"价格:\")]),_vm._v(\" \"+_vm._s(_vm.shop.price)+\" \"),_c('span',[_vm._v(\"¥\")])]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.addShopCar(_vm.shop.Id)}}},[_vm._v(\"加入购物车\")])],1)]),_c('div',{staticClass:\"list\"},[_c('h1',[_vm._v(\"相关商品\")]),_vm._l((_vm.shoplist),function(item,index){return [(index<8)?_c('shop',{key:index,attrs:{\"shop\":item,\"imgHeight\":'250px'},on:{\"onShopClick\":_vm.replaceLink}}):_vm._e()]})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"detail\">\r\n    <div class=\"item\">\r\n      <div class=\"magnifier\">\r\n        <Magnifier width=\"500px\" :imgsrc=\"shop.img_list_url\" />\r\n      </div>\r\n      <div class=\"dec\">\r\n        <span class=\"title\">{{ shop.title }}</span>\r\n        <p class=\"price\"><span>价格:</span> {{ shop.price }} <span>¥</span></p>\r\n        <el-button type=\"danger\" @click=\"addShopCar(shop.Id)\"\r\n          >加入购物车</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"list\">\r\n      <h1>相关商品</h1>\r\n\r\n      <template v-for=\"(item, index) in shoplist\" >\r\n        <shop v-if=\"index<8\"\r\n          @onShopClick=\"replaceLink\"\r\n          :key=\"index\"\r\n          :shop=\"item\"\r\n          :imgHeight=\"'250px'\"\r\n        />\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getDetail, getShopList, addShopCar } from \"../../api/detail.js\";\r\nexport default {\r\n  name: \"Detail\",\r\n  data() {\r\n    return {\r\n      shop: {},\r\n      shoplist: [],\r\n      // totalPrice:0,  \r\n    };\r\n  },\r\n  created() {\r\n    this.getDetail(), this.getTypeOneShop();\r\n  },\r\n  methods: {\r\n    getDetail() {\r\n      let goodId = this.$route.params.id;\r\n      getDetail(goodId).then((data) => {\r\n        this.shop = data[0];\r\n      });\r\n    },\r\n    getTypeOneShop() {\r\n      let type_one = this.$route.query.type_one;\r\n      console.log(type_one);\r\n      getShopList(type_one).then((data) => {\r\n        this.shoplist = data;\r\n      });\r\n    },\r\n    replaceLink(item) {\r\n      this.$router.replace(`/detail/${item.Id}?type_one=${item.type_one}`);\r\n    },\r\n    addShopCar(goodId) {\r\n      let { token, username } = this.$store.state.user;\r\n      this.permission(token).then((data) => {\r\n        if (data) {\r\n          let data = {\r\n            goodId,\r\n            token,\r\n            username,\r\n          };\r\n          addShopCar(data).then((data) => {\r\n            console.log(data);\r\n            if (data.code == 1) {\r\n              this.$message({\r\n                message: \"添加购物车成功\",\r\n                type: \"success\",\r\n              });\r\n            }\r\n            if (data.code == 2) {\r\n              this.$message({\r\n                message: \"添加失败\",\r\n                type: \"danger\",\r\n              });\r\n            }\r\n            // 在这里编写添加成功之后的其他交互行为\r\n            // todo: 返回滚动条滚动的位置\r\n            // todo: 对首页商品进行缓存\r\n            // this.$router.push('/home')\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 验证是否登录\r\n    permission(token) {\r\n      return new Promise((resolve, reject) => {\r\n        if (token) resolve(true);\r\n        if (!token) {\r\n          this.$confirm(\"您还未登录，是否先登录?\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          })\r\n            .then(() => {\r\n              // this.$message({\r\n              //   type: \"success\",\r\n              //   message: \"\",\r\n              // });\r\n              this.$router.push('/login');\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"info\",\r\n                message: \"已取消登录\",\r\n              });\r\n            });\r\n          resolve(false);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    // 监听路由地址变化\r\n    $route: {\r\n      deep: true,\r\n      handler(to, from) {\r\n        this.getDetail();\r\n        this.getTypeOneShop();\r\n      },\r\n    },\r\n  },\r\n \r\n\r\n};\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.magnifier {\r\n  margin: 100px auto 0px;\r\n}\r\n.dec {\r\n  .title {\r\n    font-size: 24px;\r\n    padding: 5px;\r\n  }\r\n  .price {\r\n    font-size: 36px;\r\n    padding: 5px;\r\n    span {\r\n      font-weight: 800;\r\n    }\r\n  }\r\n}\r\n.list {\r\n  width: 1200px;\r\n  margin: 50px auto;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4485eb8d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4485eb8d&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4485eb8d\",\n  null\n  \n)\n\nexport default component.exports","import request from '../utils/request.js'\r\n\r\nexport function getDetail(goodId){\r\n    return request({\r\n        url: '/api/detail',\r\n        method:'get',\r\n        params: {\r\n            goodId\r\n        }\r\n    })\r\n}\r\n\r\nexport function getShopList(type_one){\r\n    return request({\r\n        url: '/api/goodList',\r\n        method: 'get',\r\n        params: {\r\n            type_one\r\n        }\r\n    })\r\n}\r\n\r\nexport function addShopCar(data){\r\n    // goodid username token\r\n    return request({\r\n        url:\"/api/add\",\r\n        method:\"get\",\r\n        params:{\r\n            ...data,\r\n        }\r\n    })\r\n}"],"names":["render","_vm","this","_c","_self","staticClass","attrs","shop","img_list_url","_v","_s","title","price","on","$event","addShopCar","Id","_l","shoplist","item","index","key","replaceLink","_e","staticRenderFns","name","data","created","methods","getDetail","getTypeOneShop","console","getShopList","token","username","goodId","message","type","permission","confirmButtonText","cancelButtonText","then","catch","resolve","watch","$route","deep","handler","component","request","url","method","params","type_one"],"sourceRoot":""}